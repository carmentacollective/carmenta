#!/bin/sh

# Block session state files from being committed (but allow deletion)
if git diff --cached --name-only --diff-filter=d | grep -q "^autotask-state.md$"; then
  echo "âŒ autotask-state.md is a session file - don't commit it"
  echo "   Run: git restore --staged autotask-state.md"
  exit 1
fi

# Run lint-staged to check and fix files before committing
echo "ğŸ” Running pre-commit checks..."
pnpm exec lint-staged || {
  echo "âŒ Pre-commit checks failed. Fix errors above and try again."
  exit 1
}
echo "âœ… Pre-commit checks passed"
